<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
<title>æ¥é€é ç´„è¡¨å–®</title>

<style>
* { box-sizing: border-box; }
html, body {
  margin: 0;
  padding: 0;
  min-height: 100vh;
  font-family: system-ui, -apple-system, sans-serif;
  background: linear-gradient(135deg,#f5f7fa,#c3cfe2);
}
body {
  padding: 12px;
  display: flex;
  justify-content: center;
}
.container {
  width: 100%;
  max-width: 600px;
}
h2 {
  text-align: center;
  margin: 16px 0 24px;
}
label {
  display: block;
  margin: 18px 0 6px;
  font-weight: 600;
}
input, select {
  width: 100%;
  padding: 16px;
  font-size: 17px;
  border-radius: 12px;
  border: 2px solid #e5e7eb;
}
input:focus, select:focus {
  outline: none;
  border-color: #10b981;
  box-shadow: 0 0 0 3px rgba(16,185,129,.15);
}
button {
  width: 100%;
  padding: 18px;
  font-size: 18px;
  border-radius: 14px;
  border: none;
  background: linear-gradient(135deg,#10b981,#059669);
  color: #fff;
  margin-top: 26px;
}
button:disabled {
  background: #9ca3af;
}

.note {
  font-size: 14px;
  background: #ecfeff;
  padding: 12px;
  border-radius: 10px;
  margin-top: 8px;
  line-height: 1.5;
  color: #065f46;
}

.warning {
  background: #fef3c7;
  color: #92400e;
  padding: 14px;
  border-radius: 10px;
  font-size: 14px;
  line-height: 1.5;
  margin-top: 8px;
  border-left: 4px solid #f59e0b;
}

#message {
  display: none;
  margin-top: 20px;
  padding: 16px;
  border-radius: 12px;
  text-align: center;
}
.success {
  background: #d1fae5;
  color: #065f46;
}
.error {
  background: #fee2e2;
  color: #991b1b;
}

/* ===== ä¸­é€”åœé é» ===== */
.via-row {
  display: flex;
  gap: 8px;
  margin-bottom: 8px;
}
.via-input {
  flex: 1;
}
.via-add, .via-remove {
  width: 48px;
  font-size: 22px;
  border-radius: 12px;
  border: none;
  color: #fff;
}
.via-add { background: #10b981; }
.via-remove { background: #ef4444; }
</style>
</head>

<body>
<div class="container">
<h2>ğŸš— æ¥é€é ç´„è¡¨å–®</h2>

<form id="bookingForm">

<label>ğŸ“… æ—¥æœŸ</label>
<input type="date" id="date" required>

<label>ğŸ•’ å‡ºç™¼æ™‚é–“</label>
<input type="time" id="time" required>

<div class="warning">
  <strong>âœˆï¸ æŠµé”æ©Ÿå ´å»ºè­°æ™‚é–“ï¼š</strong><br>
  â€¢ åœ‹éš›ç·šï¼šèµ·é£›å‰ <b>2â€“3 å°æ™‚</b><br>
  â€¢ åœ‹å…§ç·šï¼šèµ·é£›å‰ <b>1 å°æ™‚</b><br>
  â€¢ é£›å¾€ç¾åœ‹èˆªç­ï¼šå»ºè­° <b>3 å°æ™‚ä»¥ä¸Š</b><br>
  âš ï¸ è«‹è‡ªè¡Œé ç•™å¡è»Šèˆ‡å®‰æª¢æ™‚é–“
</div>

<label>âœˆï¸ èˆªç­è™Ÿç¢¼</label>
<input type="text" id="flightNumber" required placeholder="CI123" oninput="this.value=this.value.toUpperCase()">

<label>ğŸ¢ èˆªå»ˆ</label>
<select id="terminal" required>
<option value="">è«‹é¸æ“‡</option>
<option>T1</option>
<option>T2</option>
<option>T3</option>
</select>

<label>ğŸ“ å‡ºç™¼åœ°</label>
<input type="text" id="startAddress" required>

<label>ğŸ›£ï¸ ä¸­é€”åœé é»ï¼ˆé¸å¡«ï¼‰</label>
<div id="viaContainer">
  <div class="via-row">
    <input class="via-input" placeholder="è«‹è¼¸å…¥ä¸­é€”åœ°å€">
    <button type="button" class="via-add">ï¼‹</button>
  </div>
</div>

<label>ğŸ“ ç›®çš„åœ°</label>
<select id="endAddress" required>
<option value="">è«‹é¸æ“‡</option>
<option value="æ¡ƒåœ’æ©Ÿå ´">æ¡ƒåœ’æ©Ÿå ´</option>
<option value="æ¾å±±æ©Ÿå ´">æ¾å±±æ©Ÿå ´</option>
<option value="å…¶ä»–">å…¶ä»–</option>
</select>
<input id="endCustom" placeholder="è‹¥é¸å…¶ä»–è«‹è¼¸å…¥å®Œæ•´åœ°å€" style="display:none;margin-top:8px">

<label>ğŸš™ è»Šå‹é¸æ“‡ï¼ˆå«è¡Œæåƒè€ƒï¼‰</label>
<select id="carType" required>
<option value="">è«‹é¸æ“‡</option>
<option>èˆ’é©è½è»Šï¼ˆè¡Œæ1â€“2ä»¶ï¼‰</option>
<option>äº”åº§ä¼‘æ—…ï¼ˆè¡Œæ3â€“4ä»¶ï¼‰</option>
<option>7äººåº§ï¼ˆè¡Œæ3â€“4ä»¶ï¼‰</option>
<option>8â€“9åº§å¤§è»Šï¼ˆè¡Œæ6ä»¶ä»¥ä¸Šï¼‰</option>
</select>

<div class="note">
  <strong>ğŸ§³ è»Šå‹èˆ‡è¡Œææé†’ï¼š</strong><br>
  â€¢ è¡Œæä»¥å¤§å‹è¡Œæç®±ç‚ºä¸»<br>
  â€¢ è‹¥æœ‰å¬°å…’è»Šã€é«˜çˆ¾å¤«çƒè¢‹ã€ç´™ç®±ç­‰å¤§å‹ç‰©å“<br>
  ğŸ‘‰ è«‹æå‰å‘ŠçŸ¥ï¼Œé¿å…è‡¨æ™‚ç„¡æ³•è¼‰é‹
</div>

<label>ğŸª‘ å…’ç«¥å®‰å…¨åº§æ¤…</label>
<select id="childSeat" required>
<option value="">è«‹é¸æ“‡</option>
<option>ä¸éœ€è¦</option>
<option>éœ€è¦å®‰å…¨åº§æ¤…ï¼ˆ0â€“4æ­²ï¼‰</option>
<option>éœ€è¦å¢é«˜å¢Šï¼ˆ4â€“12æ­²ï¼‰</option>
</select>

<label>ğŸ‘¤ å§“å</label>
<input id="name" required>

<label>ğŸ“± é›»è©±</label>
<input id="phone" required placeholder="0912345678">

<button type="button" id="submitBtn">âœ… é€å‡ºé ç´„</button>

</form>

<div id="message"></div>
</div>

<script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>

<script>
emailjs.init({ publicKey: "3NaCLzxTOKYgHeXyP" });

date.value = new Date().toISOString().slice(0,10);

// ç›®çš„åœ°å…¶ä»–
endAddress.onchange = () => {
  endCustom.style.display = endAddress.value === 'å…¶ä»–' ? 'block' : 'none';
};

// ä¸­é€”åœé é»
viaContainer.onclick = e => {
  if (e.target.classList.contains('via-add')) {
    const row = document.createElement('div');
    row.className = 'via-row';
    row.innerHTML = `
      <input class="via-input" placeholder="è«‹è¼¸å…¥ä¸­é€”åœ°å€">
      <button type="button" class="via-remove">âœ•</button>`;
    viaContainer.appendChild(row);
  }
  if (e.target.classList.contains('via-remove')) {
    e.target.parentElement.remove();
  }
};

// é€å‡º
submitBtn.onclick = async () => {
  submitBtn.disabled = true;
  submitBtn.textContent = 'é€å‡ºä¸­...';

  const vias = [...document.querySelectorAll('.via-input')]
    .map(v => v.value.trim())
    .filter(v => v)
    .join('ã€') || 'ç„¡';

  try {
    await emailjs.send('service_gd932ui','template_53hb8ks',{
      date: date.value,
      time: time.value,
      flight: flightNumber.value,
      terminal: terminal.value,
      start: startAddress.value,
      via: vias,
      end: endAddress.value === 'å…¶ä»–' ? endCustom.value : endAddress.value,
      car: carType.value,
      childSeat: childSeat.value,
      name: name.value,
      phone: phone.value
    });
    message.className = 'success';
    message.textContent = 'âœ… é ç´„æˆåŠŸï¼Œå·²é€å‡ºï¼';
  } catch {
    message.className = 'error';
    message.textContent = 'âŒ é€å‡ºå¤±æ•—ï¼Œè«‹é‡è©¦';
  }

  message.style.display = 'block';
  submitBtn.disabled = false;
  submitBtn.textContent = 'âœ… é€å‡ºé ç´„';
};
</script>
</body>
</html>
